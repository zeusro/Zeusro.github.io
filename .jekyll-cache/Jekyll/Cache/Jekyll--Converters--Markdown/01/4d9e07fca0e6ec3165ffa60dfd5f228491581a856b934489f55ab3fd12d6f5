I"C<h2 id="实现原理">实现原理</h2>

<p><a href="https://github.com/Gh0u1L5/WechatMagician">WechatMagician</a>的部分功能的实现原理是这样的.</p>

<p>微信应用在本地的数据库里面储存了大量信息,WeChatMagician在对数据库进行操作之前做了一些手脚,让原本的行为发生改变.</p>

<p>举个例子,用户 A 发信息给用户 B之后,用户 B 的手机上面的应用数据库会保存这条信息.而如果用户 A 此时选择撤回消息,那么用户 B 的微信app 会删除相应的这条信息记录.那么巫师的原理就是在删除这条信息之前做个手脚,阻止删除的结果的产生.这个过程叫做挟持（Hook)</p>

<p>我做的部分只是把包名改成我自己的,然后换成自己的支付宝/微信收钱码,哈哈哈哈哈哈哈哈哈阿哈哈哈。</p>

<p>这个插件做的比较好的地方，在于他是通过方法名查找到关联的方法。而一般的微信插件都是通过直接找到混淆后的方法名，所以每次微信更新，他们都要跟着更新。可惜，作者弃坑了，哈哈哈哈哈哈哈哈哈阿哈哈哈 ~</p>

<h2 id="微信的表名">微信的表名</h2>

<table>
  <thead>
    <tr>
      <th>表名</th>
      <th>用途</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>message</td>
      <td>用户之间的发信记录</td>
      <td> </td>
    </tr>
    <tr>
      <td>SnsInfo</td>
      <td>朋友圈</td>
      <td> </td>
    </tr>
    <tr>
      <td>SnsComment</td>
      <td>朋友圈评论</td>
      <td> </td>
    </tr>
  </tbody>
</table>
:ET