---
layout:       post
title:        " Github 加速"
subtitle:     ""
date:         2020-02-17
author:       "Zeusro"
header-img:   "img/oYYBAFHlDveICOlTAAWdBpjTP2sAAAvzgB9mBEABZ0e231.jpg"
header-mask:  0.3
catalog:      true
tags:
    - GitHub
    - git
---

最近因为疫情的问题，XXX 又拉起了遮羞布。

访问GitHub的时候人物头像不显示就算了，执行 `raw.githubusercontent.com`( GitHub 静态文件托管域名) 上面的远程代码直接爆 443 。搞得大家工作都不太方便。

我收集整理了目前现行的解决方案。

## 认识问题

### GitHub相关域名

**HOST 里的 IP 是错的，请勿直接复制粘贴！**

```host
# GitHub Start
192.30.253.112 github.com
192.30.253.119 gist.github.com
151.101.228.133 assets-cdn.github.com
151.101.228.133 raw.githubusercontent.com
151.101.228.133 gist.githubusercontent.com
151.101.228.133 cloud.githubusercontent.com
151.101.228.133 camo.githubusercontent.com
151.101.228.133 avatars0.githubusercontent.com
151.101.228.133 avatars1.githubusercontent.com
151.101.228.133 avatars2.githubusercontent.com
151.101.228.133 avatars3.githubusercontent.com
151.101.228.133 avatars4.githubusercontent.com
151.101.228.133 avatars5.githubusercontent.com
151.101.228.133 avatars6.githubusercontent.com
151.101.228.133 avatars7.githubusercontent.com
151.101.228.133 avatars8.githubusercontent.com
192.30.253.116  api.github.com
# GitHub End
```

### 问题根源

大规模 DNS挟持污染，解析到的日本IP 151.101.228.133 丢包严重

```bash
ping 151.101.228.133
......
--- 151.101.228.133 ping statistics ---
2661 packets transmitted, 2309 packets received, 13.2% packet loss
round-trip min/avg/max/stddev = 69.550/117.602/230.267/21.696 ms
```

## 代理方案

### 自行修改 pac 文件

#### 修改本地pac

由上可得出，GitHub 相关的域名有

```
github.com
*.github.com
*.githubusercontent.com
```

Windows 端的纸飞机 pac 是个本地文件；

mac 端的纸飞机 可以直接编辑，一行一个域名，原理都类似，不懂就复制粘贴 ~

[V2rayU](https://github.com/yanue/V2rayU) 同理


#### 更新本地 DNS 解析


##### MAC （OS X 10.11+ ）

```bash
sudo dscacheutil -flushcache
sudo killall -HUP mDNSResponder
```

##### window

```bash
ipconfig /flushdns
```

## 无代理方案

### 修改 host

在
https://www.ipaddress.com/
找到 github.com 等域名的美国的IP，然后绑定HOST就行。
**这是一个体力活**。

window 系统文件位置在 `C:/windows/system32/drivers/etc/hosts`

mac 系统文件位于 /etc/hosts

建议用 

进阶方案是写程序用调用web接口动态更新HOST


```
# raw.githubusercontent.com 是 GitHub 的静态文件托管域名
199.232.28.133 raw.githubusercontent.com
```

我当时是急着用`raw.githubusercontent.com`上面的代码，所以我改成一个美国的IP，然后通过代理访问上了。


## git 加速

### ssh加速

### 本地代理 + git 加速

## 终极解决方案

美国绿卡



最后多说一句，
[最近有人还原了s协议客户端的整个攻击过程](https://www.leadroyal.cn/?p=1036)

## 参考链接：
1. [修改Hosts临时解决GitHub的raw.githubusercontent.com无法链接的问题](https://www.ioiox.com/archives/62.html)
1. []()
1. []()
1. []()
1. []()
1. []()
1. []()
1. []()
1. []()
1. []()
1. []()
1. []()