Сначала давайте уточним концепцию:

> Реляционные базы данных являются собственным подмножеством нереляционных баз данных, а нереляционные базы данных являются собственным подмножеством баз данных временных рядов.

## Реляционные базы данных

![image](/img/in-post/tsdb/mysql.png)

Реляционные базы данных определяются как:
> Базы данных, использующие реляционную модель для организации данных, хранящие данные в строках и столбцах для понимания пользователем. Эта серия строк и столбцов в реляционных базах данных называется таблицами, а группа таблиц образует базу данных.

Вершиной реляционных баз данных является MySQL. Проблема реляционных баз данных заключается в акценте на "отношениях". Но на самом деле, **отношения между объектами являются слабыми отношениями. Сильные отношения — это всего лишь особый случай**.

Например. Давайте определим три объекта: Сяо Мин, Сяо Хун и Сяо Ван. Сяо Мин и Сяо Хун — сожительствующие любовники, а Сяо Ван живёт по соседству. Однажды Сяо Мин приходит домой и видит Сяо Хун и Сяо Вана в одной комнате. Что подумает Сяо Мин?

Должен ли он сказать, что Сяо Ван и Сяо Хун играют в дом, или принять их объяснение, что Сяо Ван меняет лампочку в комнате?

Эта проблема отношений — это на самом деле самая большая проблема реляционных баз данных—**путаница с отношениями**. Во многих текущих стандартах проектирования разработки реляционные базы данных были обработаны как склад хранения данных (кучи таблиц), запрещая хранимые процедуры и внешние ключи. Можно сказать, что это неизбежный результат исторического развития.

## Нереляционные базы данных

Итак, нереляционные базы данных, естественно, это NoSQL.

> NoSQL, в общем, относящийся к нереляционным базам данных. С подъёмом интернет-сайтов web2.0 традиционные реляционные базы данных показали неадекватность в обработке сайтов web2.0, особенно ультра-крупномасштабных и высококонкурентных SNS-типа чисто динамических сайтов web2.0, с множеством непреодолимых проблем. Нереляционные базы данных развивались очень быстро благодаря своим характеристикам. Базы данных NoSQL появились для решения проблем, вызванных крупномасштабными коллекциями данных с множественными типами данных, особенно проблемами приложений больших данных.

Среди них есть базы данных ключ-значение, представленные Redis, и документные базы данных, представленные MongoDB.

![image](/img/in-post/tsdb/redis.jpg)

Redis основан на памяти (хотя может также сохраняться на диск), а память — довольно ценный ресурс. Ограничение ресурсов ограничивает широкое использование ресурсов.

![image](/img/in-post/tsdb/Mongodb.png)

MongoDB на самом деле немного похож на Excel. В файлах Excel каждая строка может иметь любое количество ячеек.

Например, "хобби" и "супруг" Юи Арагаки в MongoDB не null, а просто вообще не имеют этих полей.

姓名 | 性别|电话|爱好|偶像|特长
|---|---|---|---|---|---
王蟑螂 |男|+8617051026064|吃耙耙|新亘结衣
新亘结衣|女|+8113766621544|||唱歌

Если проблема Redis в том, что память слишком ценна, то я думаю, что проблема нереляционных баз данных в том, что объекты, которые они описывают, "недостаточно естественны".

## Базы данных временных рядов

![image](/img/in-post/tsdb/tsdb.jpg)

"Недостаточно естественно" означает отсутствие атрибута "время". На самом деле, **время — это первый атрибут данных**. Любые данные без атрибута времени становятся бессмысленными. Поэтому многие таблицы в спецификациях проектирования говорят об этом на уровне спецификации: **должен быть атрибут времени создания**.

Кроме того, базы данных временных рядов должны удовлетворять этой характеристике: **Неизменяемость**. Неизменяемость означает, что данные не могут быть изменены после ввода. Бизнес базы данных обрабатывается движками потоков данных в реальном времени.

Базы данных временных рядов — это модель, которая лучше всего подходит реальному миру. Возьмём простейший пример: я хочу ударить вас по груди маленькими кулачками. Давайте сначала упростим это действие, а затем введём его в базу данных временных рядов~

"Маленькие кулачки бьют по груди," самая упрощённая модель — это описание точки, движущейся от одной точки к другой в трёхмерном пространстве как "линейный сегмент" (потому что расстояние движения ограничено, это называется линейным сегментом).

В трёхмерном пространстве нахождение расстояния между двумя точками на самом деле ничем не отличается от нахождения расстояния между двумя точками в одномерном пространстве—просто обобщите теорему Пифагора. Я бы сказал, что теорема Пифагора — это "лестница" для повышения размерности.

С этим пониманием определение данных в базах данных временных рядов очень естественно и просто. Всё ещё используя эту проблему в качестве примера, решение этой проблемы требует только сбора данных с интервалами и ввода их.

时间 | X |Y|Z
|---|---|---|---
2020-04-01 09:35:00|1|1|1
2020-04-01 09:35:01|2|2|2
2020-04-01 09:35:02|3|3|3
2020-04-01 09:35:03|3|3|3

### Анализ мониторинга

![image](/img/in-post/tsdb/monitor.jpg)

Дун Бинлинь, руководитель платформы мониторинга Hangzhou Dihuo Technology, сказал это: "(Alibaba Cloud) TSDB помог нам решить проблему хранения данных метрик. Его отличная производительность, нулевые операционные затраты, постоянное хранение данных и выделенная техническая поддержка — все причины, по которым мы продолжаем использовать его. В настоящее время мы можем легко просматривать информацию о метриках в реальном времени и отслеживать историческую информацию о метриках, своевременно обнаруживать проблемы и предоставлять основу для дальнейших решений. TSDB — незаменимая часть для нас."

### Анализ трендов

Анализ трендов используется для вероятностного прогнозирования будущего. Например, в данных выше, моделирование с трёхмерной декартовой системой координат даёт линейную линию тренда. Мы можем предсказать, что в `2020-04-01 09:35:04` мои маленькие кулачки, скорее всего, приземлятся в координатной точке (4, 4, 4).

### Анализ прослеживаемости

Анализ прослеживаемости противоположен анализу трендов—это другая структура данных в обратном хронологическом порядке.

时间|X|Y|Z
|---|---|---|---
2020-04-01 09:35:03|3|3|3
2020-04-01 09:35:02|3|3|3
2020-04-01 09:35:01|2|2|2
2020-04-01 09:35:00|1|1|1

В этой проблеме, после установления линейной линии тренда, мы можем использовать рассуждения о прослеживаемости, чтобы проанализировать, что в `2020-04-01 09:34:59` мой кулак, скорее всего, был в (0,0,0).

То есть, это используется для вероятностного прогнозирования "прошлого". Анализ прослеживаемости может использоваться в сценариях, таких как уголовное расследование, отслеживание причин исторических проблем и т.д.

Текущие базы данных временных рядов всё ещё имеют относительно структурированные записи в каждой строке. И они широко применяются в области мониторинга, что на самом деле является недоразумением.
Обобщённые базы данных временных рядов поддерживают произвольные атрибуты в каждой строке данных.

## Заключение

**Я верю, что в будущем базы данных временных рядов превзойдут реляционные и нереляционные базы данных, чтобы стать предпочтительным решением для разработки приложений**.

## Ссылки

1. [Реляционные базы данных](https://baike.baidu.com/item/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/8999831)
3. [NoSQL](https://baike.baidu.com/item/NoSQL)
4. [Что такое диаграммы рассеяния? Для чего они используются?](https://zhuanlan.zhihu.com/p/22986989)
5. [База данных временных рядов TSDB](https://www.aliyun.com/product/hitsdb?spm=5176.12825654.eofdhaal5.58.e9392c4aHy5yJU)
