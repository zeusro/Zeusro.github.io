まず、概念を明確にしましょう：

> リレーショナルデータベースは非リレーショナルデータベースの真部分集合であり、非リレーショナルデータベースは時系列データベースの真部分集合です。

## リレーショナルデータベース

![image](/img/in-post/tsdb/mysql.png)

リレーショナルデータベースは次のように定義されます：
> リレーショナルモデルを使用してデータを整理するデータベースで、ユーザーの理解のために行と列の形式でデータを保存します。リレーショナルデータベースのこの一連の行と列はテーブルと呼ばれ、テーブルのグループがデータベースを形成します。

リレーショナルデータベースの集大成はMySQLです。リレーショナルデータベースの問題は「関係」を強調することにあります。しかし、実際には、**オブジェクト間の関係は弱い関係です。強い関係は単なる特殊なケースです**。

例を挙げましょう。3つのオブジェクトを定義します：小明、小红、小王。小明と小红は同棲している恋人で、小王は隣に住んでいます。ある日、小明が家に帰ると、小红と小王が同じ部屋にいるのを見ます。この時、小明は何を考えるでしょうか？

小王と小红がままごとをしていると言うべきか、それとも彼らの説明を受け入れ、小王が部屋で電球を交換していると考えるべきでしょうか？

この関係の問題は、実際にはリレーショナルデータベースの最大の問題—**関係をめちゃくちゃにすること**です。現在の多くの開発設計規格では、リレーショナルデータベースをデータストレージの倉庫（ヒープテーブル）として扱い、ストアドプロシージャと外部キーを禁止しています。これは歴史的発展の必然的な結果と言えます。

## 非リレーショナルデータベース

では、非リレーショナルデータベースは当然NoSQLです。

> NoSQL、一般的に非リレーショナルデータベースを指します。インターネットweb2.0ウェブサイトの台頭により、従来のリレーショナルデータベースは、web2.0ウェブサイト、特に超大規模で高同時実行のSNSタイプのweb2.0純動的ウェブサイトを処理する際に不十分であることが示され、克服困難な問題が多く発生しています。非リレーショナルデータベースは、その特性により非常に急速に発展しています。NoSQLデータベースは、大規模データコレクションの複数のデータタイプ、特にビッグデータアプリケーションの問題によってもたらされる課題を解決するために出現しました。

その中には、Redisを代表とするキー値データベースと、MongoDBを代表とするドキュメントデータベースがあります。

![image](/img/in-post/tsdb/redis.jpg)

Redisはメモリベースです（ディスクに永続化することもできますが）、メモリは非常に貴重なリソースです。リソースの制限がリソースの広範な使用を制限しています。

![image](/img/in-post/tsdb/Mongodb.png)

MongoDBは実際にはExcelに少し似ています。Excelファイルでは、各行に任意の数のセルを含めることができます。

例えば、新垣結衣のMongoDBでの「趣味」と「配偶者」はnullではなく、単にこれらのフィールドがまったく存在しません。

姓名 | 性别|电话|爱好|偶像|特长
|---|---|---|---|---|---
王蟑螂 |男|+8617051026064|吃耙耙|新亘结衣
新亘结衣|女|+8113766621544|||唱歌

Redisの問題がメモリが非常に貴重であることであるなら、非リレーショナルデータベースの問題は、記述するオブジェクトが「十分に自然ではない」ことだと思います。

## 時系列データベース

![image](/img/in-post/tsdb/tsdb.jpg)

「十分に自然ではない」とは、「時間」という属性が欠けていることを意味します。実際、**時間はデータの第一属性です**。時間属性のないデータはすべて無意味になります。だから多くのテーブルは設計規格で、規格レベルでこう言っています：**作成時間属性が必要です**。

それ以外に、時系列データベースは次の特性を満たす必要があります：**不変性（Immutability）**。不変性とは、データが入力後に変更できないことを意味します。データベースのビジネスはリアルタイムデータストリームエンジンによって処理されます。

時系列データベースは、現実世界に最も適合するモデルです。最も簡単な例を挙げましょう：小さな拳で胸を叩きたい。まずこのアクションを簡略化してから、時系列データベースに入力しましょう〜

「小さな拳で胸を叩く」、最も簡略化されたモデルは、3次元空間内の1つの点が別の点に移動する「線分」（移動距離が限られているため、線分と呼ばれます）を記述することです。

3次元空間では、2点間の距離を求めることは、実際には1次元空間で2点間の距離を求めることと違いはなく、ピタゴラスの定理を一般化するだけです。ピタゴラスの定理は、次元を上げる「はしご」だと言えます。

この理解により、時系列データベースでデータを定義することは非常に自然で簡単です。この問題を例として、この問題を解決するには、一定間隔でデータを収集して入力するだけです。

时间 | X |Y|Z
|---|---|---|---
2020-04-01 09:35:00|1|1|1
2020-04-01 09:35:01|2|2|2
2020-04-01 09:35:02|3|3|3
2020-04-01 09:35:03|3|3|3

### 監視分析

![image](/img/in-post/tsdb/monitor.jpg)

杭州迪火科技監視プラットフォーム責任者の董兵林はこう言いました：「（Alibaba Cloud）TSDBは指標データストレージの問題を解決してくれました。その優れたパフォーマンス、ゼロ運用コスト、永続的なデータストレージ、専用の技術サポートは、私たちが使い続ける理由です。現在、リアルタイムの指標情報を簡単に表示し、履歴の指標情報を追跡し、問題をタイムリーに発見し、さらなる決定の根拠を提供できます。TSDBは私たちにとって不可欠な部分です。」

### 傾向分析

傾向分析は、未来を確率的に予測するために使用されます。例えば、上記のデータで、3次元デカルト座標系でモデリングすると、線形トレンドラインが得られます。`2020-04-01 09:35:04`に、私の小さな拳が座標点（4、4、4）に落ちる可能性が高いと予測できます。

### トレーサビリティ分析

トレーサビリティ分析は傾向分析の逆—逆時系列順の別のデータ構造です。

时间|X|Y|Z
|---|---|---|---
2020-04-01 09:35:03|3|3|3
2020-04-01 09:35:02|3|3|3
2020-04-01 09:35:01|2|2|2
2020-04-01 09:35:00|1|1|1

この問題では、線形トレンドラインを確立した後、トレーサビリティ推論を使用して、`2020-04-01 09:34:59`に私の拳が（0,0,0）にあった可能性が高いと分析できます。

つまり、これは「過去」を確率的に予測するために使用されます。トレーサビリティ分析は、刑事調査、歴史的問題の原因追跡などのシナリオで使用できます。

現在の時系列データベースは、各行のレコードが比較的構造化されています。そして、監視分野で広く適用されていますが、これは実際には誤解です。
一般化された時系列データベースは、各行のデータで任意の属性をサポートします。

## 結論

**私は、将来、時系列データベースがリレーショナルデータベースと非リレーショナルデータベースを超えて、アプリケーション開発の優先ソリューションになると信じています**。

## 参考リンク

1. [リレーショナルデータベース](https://baike.baidu.com/item/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/8999831)
3. [NoSQL](https://baike.baidu.com/item/NoSQL)
4. [散布図とは？何に使われるか？](https://zhuanlan.zhihu.com/p/22986989)
5. [時系列データベース TSDB](https://www.aliyun.com/product/hitsdb?spm=5176.12825654.eofdhaal5.58.e9392c4aHy5yJU)
