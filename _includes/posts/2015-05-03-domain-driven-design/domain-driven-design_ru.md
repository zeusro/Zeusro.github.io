После прочтения <ASP.NET Design Patterns> у меня было озарение. Оказывается, мои прежние привычки кодирования назывались транзакционными сценариями, активной записью и объектами запросов.

Я все еще довольно привык к трехслойной архитектуре или ее вариантам. Однако позже я обнаружил, что поддержка большого проекта действительно болезненна. С транзакционными сценариями возникает ситуация, когда мне нужно изменить функцию, но я не знаю, какой конкретный класс или метод соответствует этой функции. Что касается активной записи, когда речь идет о последовательных операциях с несколькими таблицами, это кажется немного странным. Кажется, что этот метод не должен быть здесь, но я не знаю, куда его еще поместить.

То, что я понимаю о предметно-ориентированном проектировании (Domain-Driven Design), — это философия моделирования. Эта философия размещает организацию методов внутри доменных объектов. Доменные объекты для меня — это абстрактные именованные типы. Например, потребители, поставщики услуг, заказы и различные объекты в диаграммах взаимодействия. Например, есть доменный объект банкира, доменный объект пролетариата. Когда пролетариат берет деньги в банке, в классе пролетариата есть метод заимствования. Параметры этого метода включают объект банкира и некоторые требуемые "процедуры". Лично я не люблю делать доменные модели слишком анемичными, потому что многие свойства нужно внедрять при создании экземпляра. Что делать, если методов слишком много? Но я все равно добавлю необходимый первичный ключ id.

Итак, основное тело этого метода заимствования — не что иное, как: мне нужно судить, является ли заимствование законным на основе этих процедур. Источник данных не получается в этом методе, а передается как параметр. Так где же записан источник данных? Он записан в интерфейсе репозитория в доменном сервисе. Таким образом, проблем нет. Когда бизнес меняется, нам нужно только изменить этот метод заимствования. Если нужны другие процедуры? Я думаю, что в то время рассмотрю возможность сделать "процедуры" атрибутом заемщика.
