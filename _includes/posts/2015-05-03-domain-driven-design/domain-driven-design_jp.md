<ASP.NET設計パターン>を読んだ後、目から鱗が落ちるような感覚がありました。以前のコーディング習慣がトランザクションスクリプト、アクティブレコード、クエリオブジェクトと呼ばれていたことがわかりました。

私はまだ三層アーキテクチャやその変形に慣れています。しかし、後期になって、大規模なプロジェクトのメンテナンスが本当に厄介であることに気づきました。トランザクションスクリプトには、機能を修正する必要があるが、どのクラスのどのメソッドがこの機能に対応しているかわからないという状況があります。アクティブレコードについては、複数のテーブルにまたがる順次操作に関しては、少し奇妙に感じます。このメソッドはここに置くべきではないように感じますが、どこに置くべきかわかりません。

私が理解しているドメイン駆動設計は、モデリングの思想です。この思想は、メソッドの配置をドメインオブジェクト内に置きます。ドメインオブジェクトは、私にとって抽象的な名前付き型です。例えば、消費者、サービス提供者、注文、インタラクション図の様々なオブジェクトです。例えば、銀行家ドメインオブジェクト、プロレタリアートドメインオブジェクトがあります。プロレタリアートが銀行からお金を借りる場合、プロレタリアートクラス内に借金メソッドがあります。このメソッドのパラメータには、銀行家オブジェクトと必要な「手続き」が含まれます。個人的には、ドメインモデルをあまり貧血にしたくありません。なぜなら、多くのプロパティがインスタンス化時に注入される必要があるからです。メソッドが多すぎる場合はどうすればよいでしょうか？しかし、必要な主キーIDは追加します。

この借金メソッドの本体は、これらの手続きに基づいて借金が合法かどうかを判断することに他なりません。データソースはこのメソッド内で取得されるのではなく、パラメータとして渡されます。では、データソースはどこに書かれているのでしょうか？ドメインサービス内のリポジトリインターフェースに書かれています。これで問題ありません。ビジネスが変更されたとき、この借金メソッドを変更するだけで済みます。他の手続きが必要な場合はどうでしょうか？その時点で「手続き」を借主の属性として検討すると思います。
